var project={size:0,current:0,update:true};$(document).ready(function(){project.size=$(".project").length;getTheme();autoFocus();$("#search").on("blur",function(){autoFocus()});$("#search").keyup(function(a){search()});initSelected();$(".theme-preview").click(function(){setCookie("theme",$(this).attr("theme"),700);window.location.reload()});updateProjects(1);$(".project-link").click(function(a){window.open($(this).attr("href"),"_blank")})});function autoFocus(){setTimeout(function(){$("#search").focus()},10)}function updateProjects(a){setTimeout(function(){$(".project").each(function(b,c){ajax("drawFull",{project:$(this).attr("project")})})},a)}function search(){var c=$("#search").val().toLowerCase();var a=c.split("|");setSelected(a.length>0?a:[""]);if(filter(a.length>0?a:[""])==0){var b='<p class="text-center h-100 mt-5 h3 text-muted font-weight-light">No results founded...</p>';$(".find-result").html(b)}else{$(".find-result").html("")}}function ajax(a,b){$.post("ajax",{action:a,data:JSON.stringify(b)},function(d,f,e){var c=JSON.parse(d);if(project.update){$("[project="+c.project+"]").replaceWith(c.html)}search();project.current++;$(".progress-bar").css("width",(project.current/project.size*100)+"%");if(project.current==project.size){project.current=0;$(".progress-bar").css("width",(project.current/project.size*100)+"%");updateProjects(10000)}})}function filter(a){var b=0;$(".site").each(function(d,f){var h=$(f).html().toLowerCase();var c=$(f).closest(".project");var g=false;for(var e=0;e<a.length;e++){if(h.indexOf(a[e])>-1){g=true}}if(g){$(c).removeClass("d-none");b++}else{$(c).addClass("d-none")}});return b}function setSelected(a){a=a.unique();var b=a.join("|");window.location.hash=b}function getSelected(){var a=window.location.hash;a=a.replace("#","");var b=a.split("|");return b}function initSelected(){var b=getSelected();var a=b.join("|");if(a.length>0){filter(b.length>0?b:[""]);$("#search").val(a)}}function getTheme(){var b=getCookie("theme");var a=b.replace("theme-","");$("<link/>",{rel:"stylesheet",type:"text/css",href:"css/themes/"+a+".min.css"}).appendTo("head");$(".theme-"+a).find(".theme-info").append('<span class="badge badge-success">Active</span>');$("body").addClass("theme-"+a);if(a=="special"){$("#container").prepend('<div class="grid"></div>')}}function getCookie(d){var b=d+"=";var f=decodeURIComponent(document.cookie);var a=f.split(";");for(var e=0;e<a.length;e++){var g=a[e];while(g.charAt(0)==" "){g=g.substring(1)}if(g.indexOf(b)==0){return g.substring(b.length,g.length)}}return""}function setCookie(b,f,c){var e=new Date();e.setTime(e.getTime()+(c*24*60*60*1000));var a="expires="+e.toUTCString();document.cookie=b+"="+f+";"+a+";path=/"}Array.prototype.unique=function(){var c={},b=[];for(var a=0;a<this.length;a++){if(!c[this[a]]){c[this[a]]=true;b.push(this[a])}}return b};